{
    "name": "probe-rs-debugger",
    "displayName": "Debugger for probe-rs",
    "version": "0.21.1",
    "publisher": "probe-rs",
    "description": "probe-rs Debug Adapter for VS Code.",
    "author": {
        "name": "Jack NoppÃ©",
        "email": "noppej@hotmail.com"
    },
    "license": "(MIT OR Apache-2.0)",
    "pricing": "Free",
    "keywords": [
        "probe-rs",
        "rust",
        "embedded",
        "debug",
        "Arm",
        "ARM Cortex-M",
        "ARM Cortex-A",
        "Riscv-v",
        "RTT",
        "SVD"
    ],
    "engines": {
        "vscode": ">=1.84.0"
    },
    "icon": "images/probe-rs-debugger.png",
    "categories": [
        "Debuggers"
    ],
    "sponsor": {
        "url": "https://github.com/sponsors/probe-rs"
    },
    "homepage": "https://probe.rs/",
    "repository": {
        "type": "git",
        "url": "https://github.com/probe-rs/vscode.git"
    },
    "bugs": {
        "url": "https://github.com/probe-rs/vscode/issues"
    },
    "publishConfig": {
        "registry": "https://marketplace.visualstudio.com/"
    },
    "scripts": {
        "probe-rs:getDebugProtocolLatest": "curl -LJs https://microsoft.github.io/debug-adapter-protocol/debugAdapterProtocol.json -o dap/debugProtocol.json",
        "probe-rs:Update Dev Dependencies": "updates --update ./",
        "package": "vsce package --no-yarn",
        "vscode:prepublish": "rimraf dist && npm run -S build -- --minify",
        "publish": "vsce publish --no-yarn --skip-duplicate",
        "un-publish": "vsce unpublish",
        "login": "vsce login probe-rs",
        "pretest": "npm run compile && npm run lint && npm run typecheck && prettier --check .",
        "compile": "tsc -p ./",
        "lint": "eslint src --ext ts",
        "typecheck": "tsc -p tsconfig.json --noEmit",
        "watch": "npm run -S build -- --sourcemap --sources-content=false --watch",
        "build": "esbuild ./src/extension.ts --bundle --tsconfig=./tsconfig.json --external:vscode --format=cjs --platform=node --outfile=dist/extension.js"
    },
    "devDependencies": {
        "@types/glob": "^8.1.0",
        "@types/mocha": "^10.0.4",
        "@types/node": "^20.9.0",
        "@types/vscode": "^1.84.1",
        "@typescript-eslint/eslint-plugin": "^6.11.0",
        "@typescript-eslint/parser": "^6.11.0",
        "@vscode/debugadapter": "^1.64.0",
        "@vscode/debugprotocol": "^1.64.0",
        "@vscode/vsce": "^2.22.0",
        "esbuild": "^0.19.5",
        "eslint": "^8.53.0",
        "get-port": "^7.0.0",
        "glob": "^10.3.10",
        "mocha": "^10.2.0",
        "prettier": "^3.1.0",
        "rimraf": "^5.0.5",
        "ts-loader": "^9.5.0",
        "typescript": "^5.2.2",
        "updates": "latest",
        "webpack": "^5.89.0",
        "webpack-cli": "^5.1.4"
    },
    "main": "./dist/extension.js",
    "activationEvents": [
        "onDebug"
    ],
    "workspaceTrust": {
        "request": "never"
    },
    "contributes": {
        "breakpoints": [
            {
                "language": "rust"
            },
            {
                "language": "c"
            },
            {
                "language": "cpp"
            },
            {
                "language": "asm"
            }
        ],
        "debuggers": [
            {
                "type": "probe-rs-debug",
                "label": "Debug adapter on top of probe-rs",
                "languages": [
                    "rust"
                ],
                "configurationAttributes": {
                    "launch": {
                        "required": [
                            "chip",
                            "coreConfigs"
                        ],
                        "properties": {
                            "server": {
                                "type": "string",
                                "description": "Optionally connect to an existing `probe-rs-debugger` session on IP and Port, e.g. '127.0.0.1:50000'",
                                "default": "127.0.0.1:50000"
                            },
                            "consoleLogLevel": {
                                "type": "string",
                                "description": "The level of log info printed to the console. This does NOT affect the RUST_LOG defined in the `env` property.",
                                "enum": [
                                    "Console",
                                    "Info",
                                    "Debug"
                                ],
                                "enumDescriptions": [
                                    "The console will only contain error messages and process status messages.",
                                    "The console log will also contain high level information about interactions between the extension and the debug adapter.",
                                    "The console log will also contain detailed information about interactions between the extension and the debug adapter."
                                ],
                                "default": "Console"
                            },
                            "runtimeExecutable": {
                                "type": "string",
                                "description": "An OS resolvable path to the Probe-rs debugger executable.",
                                "default": "probe-rs"
                            },
                            "runtimeArgs": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "description": "String array of arguments to provide the startup arguments for the Probe-rs debugger executable.",
                                "default": [
                                    "dap-server"
                                ]
                            },
                            "env": {
                                "additionalProperties": {
                                    "type": "string"
                                },
                                "default": {},
                                "description": "Environment variables defined as a key value pair. The 'key' is the name of the environment variable, and the 'value' is value of the environment variable.",
                                "type": "object"
                            },
                            "cwd": {
                                "type": "string",
                                "description": "The working directory of the debugger, typically the RUST crate root",
                                "default": "${workspaceFolder}"
                            },
                            "probe": {
                                "type": "string",
                                "description": "Use this flag to select a specific probe in the list. Use '--probe VID:PID' or '--probe VID:PID:Serial' if you have more than one probe with the same VID:PID."
                            },
                            "chip": {
                                "type": "string",
                                "description": "Please specify the appropriate chip from the list of supported chips reported by running `probe-rs-debugger list-chips`."
                            },
                            "connectUnderReset": {
                                "type": "boolean",
                                "description": "This option will result in the target reset pin being held high during the attach operation.",
                                "default": false
                            },
                            "speed": {
                                "type": "number",
                                "description": "Specify the protocol speed in kHz."
                            },
                            "wireProtocol": {
                                "type": "string",
                                "description": "The correct wire Protocol to use.",
                                "enum": [
                                    "Swd",
                                    "Jtag"
                                ],
                                "enumDescriptions": [
                                    "Use the Serial Wire Debug (SWD) protocol.",
                                    "Use the Joint Test Action Group (JTAG) protocol."
                                ]
                            },
                            "allowEraseAll": {
                                "type": "boolean",
                                "description": "Allow the session to erase all memory of the chip or reset it to factory default.",
                                "default": true
                            },
                            "flashingConfig": {
                                "type": "object",
                                "description": "These flashing options are applied when flashing one or more core `program_binary` files to the target memory.",
                                "flashingEnabled": {
                                    "type": "boolean",
                                    "description": "Flash the target before debugging.",
                                    "default": true
                                },
                                "haltAfterReset": {
                                    "type": "boolean",
                                    "description": "Halt all cores on the target after reset.",
                                    "default": true
                                },
                                "fullChipErase": {
                                    "type": "boolean",
                                    "description": "Do a full chip erase, versus page-by-page erase.",
                                    "default": false
                                },
                                "restoreUnwrittenBytes": {
                                    "type": "boolean",
                                    "description": "Restore erased bytes that will not be rewritten from ELF.",
                                    "default": false
                                },
                                "formatOptions": {
                                    "type": "object",
                                    "items": {
                                        "format": {
                                            "type": "string",
                                            "description": "One of the supported binary formats probe-rs uses for flashing the target binary.",
                                            "enum": [
                                                "bin",
                                                "hex",
                                                "elf",
                                                "idf"
                                            ],
                                            "enumDescriptions": [
                                                "The target binary file contains the contents of the flash 1:1.",
                                                "The target binary file conforms with the [Intel HEX](https://en.wikipedia.org/wiki/Intel_HEX) format.",
                                                "The target binary file conforms with the [ELF](https://en.wikipedia.org/wiki/Executable_and_Linkable_Format) format.",
                                                "The target binary file conforms with the [ESP-IDF bootloader](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/system/app_image_format.html#app-image-structures) format"
                                            ],
                                            "default": "elf"
                                        },
                                        "baseAddress": {
                                            "type": "number",
                                            "description": "The address in memory where the binary will be flashed to."
                                        },
                                        "skip": {
                                            "type": "number",
                                            "description": "The number of bytes to skip at the start of the binary file."
                                        },
                                        "idf_bootloader": {
                                            "type": "string",
                                            "description": "The path (relative to `cwd` or absolute) to the ESP-IDF bootloader."
                                        },
                                        "idf_partition_table": {
                                            "type": "string",
                                            "description": "The path (relative to `cwd` or absolute) to the ESP-IDF partition table."
                                        }
                                    }
                                }
                            },
                            "coreConfigs": {
                                "type": "array",
                                "description": "Each MCU core will have a mandatory `coreIndex`, `programBinary`, and `chip` as well as several other optional properties.",
                                "items": {
                                    "required": [
                                        "programBinary"
                                    ],
                                    "coreIndex": {
                                        "type": "number",
                                        "description": "The zero based index of the MCU core for this session",
                                        "default": 0
                                    },
                                    "programBinary": {
                                        "type": "string",
                                        "description": "The path (relative to `cwd` or absolute) to the binary for your target firmware",
                                        "default": "./target/thumbv7em-none-eabihf/debug/${workspaceFolderBasename}"
                                    },
                                    "svdFile": {
                                        "type": "string",
                                        "description": "The path (relative to `cwd` or absolute) to the CMCIS-SVD file for your target core",
                                        "default": "./CMSIS.SVD"
                                    },
                                    "rttEnabled": {
                                        "type": "boolean",
                                        "description": "If true, the debugger will open an RTT Terminal tab for each of the active channels on the target.",
                                        "default": false
                                    },
                                    "rttChannelFormats": {
                                        "type": "array",
                                        "items": {
                                            "channelNumber": {
                                                "type": "number",
                                                "description": "The channel number to which this data format applies. If any active channel numbers are omitted, we will assume the default will be `dataFormat=String', and 'showTimestamps=false'."
                                            },
                                            "dataFormat": {
                                                "type": "string",
                                                "description": "One of the supported data formats for RTT channels.",
                                                "enum": [
                                                    "String",
                                                    "BinaryLE",
                                                    "Defmt"
                                                ],
                                                "enumDescriptions": [
                                                    "String (text) format.",
                                                    "Binary Little Endian format.",
                                                    "Deferred formatting (see: https://defmt.ferrous-systems.com)."
                                                ],
                                                "default": "String"
                                            },
                                            "showTimestamps": {
                                                "type": "boolean",
                                                "default": false,
                                                "description": "Enable the inclusion of timestamps in the RTT output for `dataFormat=String`."
                                            },
                                            "showLocation": {
                                                "type": "boolean",
                                                "default": true,
                                                "description": "Enable the inclusion of Defmt location information in the RTT output for `dataFormat=Defmt`."
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "attach": {
                        "required": [
                            "chip",
                            "coreConfigs"
                        ],
                        "properties": {
                            "server": {
                                "type": "string",
                                "description": "Optionally onnect to an existing `probe-rs-debugger` session on IP and Port, e.g. '127.0.0.1:50000'",
                                "default": "127.0.0.1:50000"
                            },
                            "consoleLogLevel": {
                                "type": "string",
                                "description": "The level of log info printed to the console. This does NOT affect the RUST_LOG defined in the `env` property.",
                                "enum": [
                                    "Console",
                                    "Info",
                                    "Debug"
                                ],
                                "enumDescriptions": [
                                    "The console will only contain error messages and process status messages.",
                                    "The console log will also contain high level information about interactions between the extension and the debug adapter.",
                                    "The console log will also contain detailed information about interactions between the extension and the debug adapter."
                                ],
                                "default": "Console"
                            },
                            "runtimeExecutable": {
                                "type": "string",
                                "description": "An OS resolvable path to the Probe-rs debugger executable.",
                                "default": "probe-rs"
                            },
                            "runtimeArgs": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "description": "String array of arguments to provide the startup arguments for the Probe-rs debugger executable.",
                                "default": [
                                    "dap-server"
                                ]
                            },
                            "env": {
                                "additionalProperties": {
                                    "type": "string"
                                },
                                "default": {},
                                "description": "Environment variables defined as a key value pair. The 'key' is the name of the environment variable, and the 'value' is value of the environment variable.",
                                "type": "object"
                            },
                            "cwd": {
                                "type": "string",
                                "description": "The working directory of the debugger, typically the RUST crate root",
                                "default": "${workspaceFolder}"
                            },
                            "probe": {
                                "type": "string",
                                "description": "Use this flag to select a specific probe in the list. Use '--probe VID:PID' or '--probe VID:PID:Serial' if you have more than one probe with the same VID:PID."
                            },
                            "chip": {
                                "type": "string",
                                "description": "Please specify the appropriate chip from the list of supported chips reported by running `probe-rs-debugger list-chips`."
                            },
                            "connectUnderReset": {
                                "type": "boolean",
                                "description": "This option will result in the target reset pin being held high during the attach operation.",
                                "default": false
                            },
                            "speed": {
                                "type": "number",
                                "description": "Specify the protocol speed in kHz."
                            },
                            "wireProtocol": {
                                "type": "string",
                                "description": "The correct wire Protocol to use.",
                                "enum": [
                                    "Swd",
                                    "Jtag"
                                ],
                                "enumDescriptions": [
                                    "Use the Serial Wire Debug (SWD) protocol.",
                                    "Use the Joint Test Action Group (JTAG) protocol."
                                ]
                            },
                            "allowEraseAll": {
                                "type": "boolean",
                                "description": "Allow the session to erase all memory of the chip or reset it to factory default.",
                                "default": true
                            },
                            "coreConfigs": {
                                "type": "array",
                                "description": "Each MCU core will have a mandatory `coreIndex`, `programBinary`, and `chip` as well as several other optional properties.",
                                "items": {
                                    "required": [
                                        "programBinary"
                                    ],
                                    "coreIndex": {
                                        "type": "number",
                                        "description": "The zero based index of the MCU core for this session",
                                        "default": 0
                                    },
                                    "programBinary": {
                                        "type": "string",
                                        "description": "The path (relative to `cwd` or absolute) to the binary for your target firmware",
                                        "default": "./target/thumbv7em-none-eabihf/debug/${workspaceFolderBasename}"
                                    },
                                    "svdFile": {
                                        "type": "string",
                                        "description": "The path (relative to `cwd` or absolute) to the CMCIS-SVD file for your target core",
                                        "default": "./CMSIS.SVD"
                                    },
                                    "rttEnabled": {
                                        "type": "boolean",
                                        "description": "If true, the debugger will open an RTT Terminal tab for each of the active channels on the target.",
                                        "default": false
                                    },
                                    "rttChannelFormats": {
                                        "type": "array",
                                        "items": {
                                            "channelNumber": {
                                                "type": "number",
                                                "description": "The channel number to which this data format applies. If any active channel numbers are omitted, we will assume the default will be `dataFormat=String', and 'showTimestamps=false'."
                                            },
                                            "dataFormat": {
                                                "type": "string",
                                                "description": "One of the supported data formats for RTT channels.",
                                                "enum": [
                                                    "String",
                                                    "BinaryLE",
                                                    "Defmt"
                                                ],
                                                "enumDescriptions": [
                                                    "String (text) format.",
                                                    "Binary Little Endian format.",
                                                    "Deferred formatting (see: https://defmt.ferrous-systems.com)."
                                                ],
                                                "default": "String"
                                            },
                                            "showTimestamps": {
                                                "type": "boolean",
                                                "default": false,
                                                "description": "Enable the inclusion of timestamps in the RTT output for `dataFormat=String`."
                                            },
                                            "showLocation": {
                                                "type": "boolean",
                                                "default": true,
                                                "description": "Enable the inclusion of Defmt location information in the RTT output for `dataFormat=Defmt`."
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "initialConfigurations": [
                    {
                        "type": "probe-rs-debug",
                        "request": "launch",
                        "name": "probe-rs Test",
                        "cwd": "${workspaceFolder}",
                        "connectUnderReset": true,
                        "chip": "STM32H745ZITx",
                        "flashingConfig": {
                            "flashingEnabled": true,
                            "haltAfterReset": true
                        },
                        "coreConfigs": [
                            {
                                "coreIndex": 0,
                                "programBinary": "./target/thumbv7em-none-eabihf/debug/${workspaceFolderBasename}"
                            }
                        ]
                    }
                ],
                "configurationSnippets": [
                    {
                        "label": "probe-rs Debug: Launch",
                        "description": "A new configuration for embedded debugging of a user selected rust file with probe-rs.",
                        "body": {
                            "type": "probe-rs-debug",
                            "request": "launch",
                            "name": "probe-rs Test",
                            "cwd": "${workspaceFolder}",
                            "connectUnderReset": false,
                            "chip": "STM32H745ZITx",
                            "flashingConfig": {
                                "flashingEnabled": true,
                                "haltAfterReset": true
                            },
                            "coreConfigs": [
                                {
                                    "coreIndex": 0,
                                    "programBinary": "./target/thumbv7em-none-eabihf/debug/${workspaceFolderBasename}"
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "configuration": [
            {
                "title": "probe-rs Debugger",
                "properties": {
                    "probe-rs-debugger.debuggerExecutable": {
                        "type": "string",
                        "markdownDescription": "Path to the `probe-rs-debugger` executable. If this is not set, the extension requires that `probe-rs-debugger` (or `probe-rs-debugger.exe`) is available on the system `PATH`.\n\nNote: Settings in 'launch.json' take precedence over this setting.",
                        "scope": "machine-overridable"
                    }
                }
            }
        ]
    }
}
